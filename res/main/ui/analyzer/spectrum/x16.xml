<plugin resizable="true">
	<vbox spacing="4">
		<!-- Head settings -->
		<align halign="-1" fill="true">
			<hbox padding.left="6" padding.right="6" padding.top="4" padding.bottom="4" spacing="8" fill="false" bg.color="bg_schema">
				<label text="labels.mode" />
				<combo id="mode" />

				<button ui:inject="Button_Freeze" text="actions.freeze" size="16" width="64" id="freeze" />

				<label text="labels.spectrogram" visibility=":mode ige 4" />
				<combo id="spm" visibility=":mode ige 4" />

				<label text="labels.channel" visibility=":mode ieq 4" />
				<label text="labels.channels" visibility=":mode band 1" />
				<hbox spacing="2">
					<combo id="spc0" width="32" visibility="(:mode ine 0) and (:mode ine 2)" />
					<combo id="spc1" width="32" visibility="(:mode ieq 1) or (:mode ieq 3) or (:mode ieq 5)" />
				</hbox>

				<label text="labels.log_scale" visibility=":mode ige 4" />
				<button id="splog" size="16" color="yellow" led="true" visibility=":mode ige 4" />
			</hbox>
		</align>

		<hbox expand="true">
			<vbox spacing="4" expand="true">
				<!-- Analyzer, Mastering -->
				<graph width.min="640" height.min="360" expand="true" fill="true" visibility=":mode ilt 4">
					<origin hpos="-1" vpos="-1" visible="false" />

					<!-- Gray grid -->
					<ui:attributes ox="0" oy="1" color="graph_alt">
						<ui:for id="f" first="20" last="90" step="10">
							<marker value="${f}" />
						</ui:for>
						<ui:for id="f" first="200" last="900" step="100">
							<marker value="${f}" />
						</ui:for>
						<ui:for id="f" first="2000" last="9000" step="1000">
							<marker value="${f}" />
						</ui:for>
						<marker value="20000" />
					</ui:attributes>

					<ui:for id="g" first="-60" last="12" step="24">
						<marker value="${g} db" ox="1" oy="0" color="graph_alt"/>
					</ui:for>

					<!-- Additional markers for zoom -->
					<ui:for id="t" first="-42" last="-6" step="12">
						<marker value="${t} db" color="graph_alt" basis="1" parallel="0" visibility=":zoom le -18 db" />
					</ui:for>

					<ui:for id="t" first="-33" last="-15" step="6">
						<marker value="${t} db" color="graph_alt" basis="1" parallel="0" visibility=":zoom le -33 db" />
					</ui:for>

					<!-- Yellow grid -->
					<marker value="100" ox="0" oy="1" color="graph_sec" />
					<marker value="1000" ox="0" oy="1" color="graph_sec" />
					<marker value="10000" ox="0" oy="1" color="graph_sec" />

					<marker value="0 db" ox="1" oy="0" color="graph_sec" />
					<marker value="-24 db" ox="1" oy="0" color="graph_sec" />
					<marker value="-48 db" ox="1" oy="0" color="graph_sec" />

					<!-- Meshes -->
					<ui:for id="i" first="0" last="15">
						<mesh xi="0" yi="${:i + 1}"
							id="spd" width="3"
							color="mesh_graph" color.hue=":hue_${i}"
							visibility="(((:mode ieq 0) or (:mode ieq 2)) and (:on_${i})) or ((:mode ieq 1) or (:mode ieq 3) and ((:spc0 ieq ${i}) or (:spc1 ieq ${i})))"
						/>
					</ui:for>

					<!-- Boundaries -->
					<marker ox="2" oy="0" value="1" color="graph_prim" />
					<marker ox="0" oy="1" value="24000" color="graph_prim" />

					<!-- Axis -->
					<axis angle="0.0" min="10" max="24000" color="graph_prim" log="true" />
					<axis angle="0.5" min="-72 db / :zoom" max="24 db * :zoom" color="graph_prim" log="true" />
					<axis angle="0.5" min="-1" max="1" visible="false" />

					<!-- Marker -->
					<marker id="freq" color="red" basis="0" parallel="1" />
					<marker id="lvl" color="red" basis="1" parallel="0" />

					<!-- Text -->
					<ui:attributes y="0" ox="0" oy="2" halign="1" valign="1" color="graph_prim">
						<text x="10" text="graph.units.hz" />
						<text x="100" text="100" />
						<text x="1000" text="graph.values.1k" />
						<text x="10000" text="graph.values.10k" />
					</ui:attributes>

					<ui:for id="t" first="-60" last="12" step="12">
						<text x="10" y="${t} db" text="${t}" halign="1" valign="1" color="graph_prim" />
					</ui:for>
					<text x="10" y="1" ox="0" oy="2" text="graph.units.db" halign="1" valign="-1" color="graph_prim" />

					<!-- Additional text -->
					<ui:attributes x="10" halign="1" valign="1" color="graph_prim" visibility=":zoom le -18 db">
						<text y="-42 db" text="-42" />
						<text y="-30 db" text="-30" />
						<text y="-18 db" text="-18" />
						<text y="-6 db" text="-6" />
					</ui:attributes>

					<ui:attributes x="10" halign="1" valign="1" color="graph_prim" visibility=":zoom le -33 db">
						<text y="-33 db" text="-33" />
						<text y="-27 db" text="-27" />
						<text y="-21 db" text="-21" />
						<text y="-15 db" text="-33" />
					</ui:attributes>
				</graph>

				<!-- Spectralizer (1 channel) -->
				<graph width.min="800" height.min="360" expand="true" fill="true" visibility=":mode ieq 4">
					<origin hpos="-1" vpos="1" visible="false" />

					<!-- Gray grid -->
					<ui:for id="f" first="20" last="90" step="10">
						<marker value="${f}" color="graph_alt"/>
					</ui:for>
					<ui:for id="f" first="200" last="900" step="100">
						<marker value="${f}" color="graph_alt"/>
					</ui:for>
					<ui:for id="f" first="2000" last="9000" step="1000">
						<marker value="${f}" color="graph_alt"/>
					</ui:for>
					<marker value="20000" color="graph_alt"/>

					<ui:for id="t" first="1" last="7" step="2">
						<marker value="${t}" ox="1" oy="0" color="graph_alt" />
					</ui:for>

					<!-- Yellow grid -->
					<marker value="100" color="graph_sec" />
					<marker value="1000" color="graph_sec" />
					<marker value="10000" color="graph_sec" />

					<ui:for id="t" first="2" last="6" step="2">
						<marker value="${t}" ox="1" oy="0" color="graph_sec" />
					</ui:for>

					<!-- Frame buffer -->
					<fbuffer id="fb0" width="1" height="1" hpos="-1" vpos="1"
						transparency="0.25" angle="0"
						mode=":spm" color="red" color.hue=":hue[spc0]" />

					<!-- Boundaries -->
					<marker value="8" ox="1" oy="0" color="graph_prim"/>
					<marker value="24000" ox="0" oy="1" color="graph_prim" />

					<!-- Axis -->
					<axis angle="0.0" min="10" max="24000" color="graph_prim" log="true" />
					<axis angle="1.5" min="0" max="8" color="graph_prim" log="false" />

					<!-- Text -->
					<ui:attributes y="8" halign="1" valign="1" color="graph_prim">
						<text x="10" text="graph.units.hz" />
						<text x="100" text="100" halign="1" />
						<text x="1000" text="graph.values.1k" />
						<text x="10000" text="graph.values.10k" />
					</ui:attributes>

					<text x="10" y="0" text="graph.axis.time" halign="1" valign="-1" color="graph_prim"/>
					<ui:for id="t" first="1" last="7">
						<text x="10" y="${t}" text="${t}" halign="1" valign="1" color="graph_prim"/>
					</ui:for>
				</graph>

				<!-- Spectralizer (2 channels) -->
				<graph width.min="800" height.min="360" expand="true" fill="true" visibility=":mode ieq 5">
					<origin hpos="-1" vpos="1" visible="false" />
					<origin hpos="0" vpos="1" visible="false" />

					<!-- Gray grid -->
					<ui:for id="f" first="20" last="90" step="10">
						<marker value="${f}" o="0" ox="0" oy="1" color="graph_alt" />
						<marker value="${f}" o="1" ox="2" oy="1" color="graph_alt" />
					</ui:for>
					<ui:for id="f" first="200" last="900" step="100">
						<marker value="${f}" o="0" ox="0" oy="1" color="graph_alt" />
						<marker value="${f}" o="1" ox="2" oy="1" color="graph_alt" />
					</ui:for>
					<ui:for id="f" first="2000" last="9000" step="1000">
						<marker value="${f}" o="0" ox="0" oy="1" color="graph_alt" />
						<marker value="${f}" o="1" ox="2" oy="1" color="graph_alt" />
					</ui:for>
					<marker value="20000" o="0" ox="0" oy="1" color="graph_alt" />
					<marker value="20000" o="1" ox="2" oy="1" color="graph_alt" />

					<ui:for id="t" first="1" last="7" step="2">
						<marker value="${t}" ox="1" oy="0" color="graph_alt" />
					</ui:for>

					<!-- Yellow grid -->
					<ui:attributes ox="0" oy="1" color="graph_sec">
						<ui:for id="c" first="0" last="1" >
							<marker value="100" o="${c}" /> <!-- 100 Hz -->
							<marker value="1000" o="${c}" /> <!-- 1 kHz -->
							<marker value="10000" o="${c}" /> <!-- 10 kHz -->
						</ui:for>
					</ui:attributes>

					<ui:for id="t" first="2" last="6" step="2">
						<marker value="${t}" color="graph_sec" basis="1" parallel="0" />
					</ui:for>

					<!-- Frame buffer -->
					<fbuffer id="fb0" x="-1" y="1" width="0.5" height="1" transparency="0.25" angle="0"
						mode=":spm" color="red" color.hue=":hue[spc0]" />
					<fbuffer id="fb1" x="0" y="1" width="0.5" height="1" transparency="0.25" angle="0"
						mode=":spm" color="red" color.hue=":hue[spc1]" />

					<!-- Boundaries -->
					<marker value="8" o="0" color="graph_prim" ox="1" oy="0" />
					<marker value="24000" o="0" color="graph_prim" ox="0" oy="1" />
					<marker value="24000" o="1" color="graph_prim" ox="2" oy="1" />

					<!-- Axis -->
					<axis o="0" angle="0.0" min="10" max="24000" length=":_a_width idiv 2" color="graph_prim" log="true" />
					<axis o="0" angle="1.5" min="0" max="8" color="graph_prim" log="false" />
					<axis o="1" angle="0.0" min="10" max="24000" length=":_a_width idiv 2" color="graph_prim" log="true" />

					<!-- Text -->
					<ui:for id="c" first="0" last="1" >
						<ui:attributes y="8" ox="0" oy="1" halign="1" valign="1" color="graph_prim">
							<text x="10" o="${c}" text="graph.units.hz" />
							<text x="100" o="${c}" text="100" />
							<text x="1000" o="${c}" text="graph.values.1k" />
							<text x="10000" o="${c}" text="graph.values.10k"/>
						</ui:attributes>

						<ui:for id="t" first="1" last="7">
							<text o="${c}" text="${t}" x="10" y="${t}" halign="1" valign="1" color="graph_prim" />
						</ui:for>
						<text o="${c}" text="graph.axis.time" basis="0;1" x="10" y="0" halign="1" valign="-1" color="graph_prim" />
					</ui:for>
				</graph>

				<hbox spacing="8">
					<label text.halign="-1" text="labels.graphs.frequency" hfill="true" padding.r="4" />
					<label text="labels.fft.window" />
					<combo id="wnd" />
					<label text="labels.fft.tolerance" />
					<combo id="tol" />
					<label text="labels.fft.envelope" />
					<combo id="env" />
				</hbox>
			</vbox>

			<vbox visibility=":mode ilt 4" vexpand="true">
				<label text="labels.zoom" />
				<fader id="zoom" angle="1" vexpand="true" />
				<value id="zoom" />
			</vbox>

			<group text="groups.metering" visibility="(:mode ieq 0) or (:mode ieq 2)">
				<grid rows="15" cols="1" expand="true">
					<label text="labels.metering.preamp" />
					<knob id="pamp" />
					<value id="pamp" same_line="true" />

					<label text="labels.metering.reactivity" />
					<knob id="react" />
					<value id="react" same_line="true" />

					<label text="labels.metering.channel" />
					<combo id="chn" width="48" />

					<label text="labels.metering.selector" />
					<knob id="sel" />
					<value id="sel" same_line="true" />

					<label text="labels.metering.frequency:hz" />
					<indicator id="freq" format="f6.1!" text_color="green" />
					<label text="labels.metering.level:db" />
					<indicator id="lvl" format="+-f4.1!" text_color="green" />
				</grid>
			</group>
		</hbox>

		<!-- Channel for metering configuration -->
		<group text="groups.channels" visibility="(:mode ieq 0) or (:mode ieq 2)">
			<grid rows="7" cols="17" transpose="true">
				<label text="labels.specials.num" />
				<label text="labels.chan.on" />
				<label text="labels.chan.solo_hold" />
				<label text="labels.chan.hue" />
				<label />
				<label text="labels.chan.shift" />
				<label text="labels.chan.:db" />

				<ui:for id="i" first="0" last="15">
					<label text="labels.specials.idx" text:id="${i}" />
					<button id="on_${i}" size="16" color="red" led="true" color.hue=":hue_${i}" />

					<grid rows="2" cols="2" fill="false">
						<button id="solo_${i}" size="12" color="red" led="true" color.hue=":hue_${i}" />
						<button id="frz_${i}" size="12" color="red" led="true" color.hue=":hue_${i}" />
						<label text="labels.chan.S_olo" font_size="8" />
						<label text="labels.chan.H_old" font_size="8" />
					</grid>

					<knob id="hue_${i}" scolor.hue=":hue_${i}" size="20"/>
					<value id="hue_${i}" detailed="false" />
					<knob id="sh_${i}" scolor.hue=":hue_${i}" size="20"/>
					<value id="sh_${i}" detailed="false" />
				</ui:for>
			</grid>
		</group>

		<!-- Channels for mastering -->
		<hbox spacing="4" visibility="(:mode ine 0) and (:mode ine 2)">
			<group text="groups.channels" expand="true" fill="true">
				<grid rows="6" cols="33" transpose="true" fill="true">
					<label text="labels.channel" />
					<label text="labels.chan.hold" />
					<label text="labels.chan.hue" />
					<label />
					<label text="labels.chan.shift" />
					<label text="labels.chan.:db" />

					<ui:for id="i" first="0" last="15">
						<label text="labels.specials.idx" text:id="${i}" />
						<button id="frz_${i}" size="32" color="red" led="true" color.hue=":hue_${i}" />
						<knob id="hue_${i}" scolor.hue=":hue_${i}" size="20" />
						<value id="hue_${i}" detailed="false" />
						<knob id="sh_${i}" scolor.hue=":hue_${i}" size="20" />
						<value id="sh_${i}" detailed="false" />
					</ui:for>
				</grid>
			</group>
			<group text="groups.metering">
				<grid rows="6" cols="1" transpose="true" fill="true">
					<label text="labels.metering.preamp" />
					<knob id="pamp" />
					<value id="pamp" same_line="true" />

					<label text="labels.metering.reactivity" />
					<knob id="react" />
					<value id="react" same_line="true" />
				</grid>
			</group>
		</hbox>
	</vbox>
</plugin>
